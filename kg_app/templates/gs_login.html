{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="Admiro admin is super flexible, powerful, clean &amp; modern responsive bootstrap 5 admin template with unlimited possibilities.">
  <meta name="keywords"
    content="admin template, Admiro admin template, best javascript admin, dashboard template, bootstrap admin template, responsive admin template, web app">
  <meta name="author" content="pixelstrap">
  <title>Ground Staff Login</title>
  <!-- Favicon icon-->
  <link rel="icon" href="{% static 'assets/img/favicon.png' %}" type="image/x-icon">
  <link rel="shortcut icon" href="{% static 'assets/img/favicon.png' %}" type="image/x-icon">
  <!-- Google font-->
  <link rel="preconnect" href="https://fonts.googleapis.com">

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link
    href="../../css2?family=Nunito+Sans:opsz,wght@6..12,200;6..12,300;6..12,400;6..12,500;6..12,600;6..12,700;6..12,800;6..12,900;6..12,1000&amp;display=swap"
    rel="stylesheet">
  <!-- Flag icon css -->
  <link rel="stylesheet" href="{% static 'assets/css/vendors/flag-icon.css' %}">
  <!-- iconly-icon-->
  <link rel="stylesheet" href="{% static 'assets/css/iconly-icon.css' %}">
  <link rel="stylesheet" href="{% static 'assets/css/bulk-style.css' %}">
  <!-- iconly-icon-->
  <link rel="stylesheet" href="{% static 'assets/css/themify.css' %}">
  <!--fontawesome-->
  <link rel="stylesheet" href="{% static 'assets/css/fontawesome-min.css' %}">
  <!-- Whether Icon css-->
  <link rel="stylesheet" type="text/css" href="{% static 'assets/css/vendors/weather-icons/weather-icons.min.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'assets/css/vendors/scrollbar.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'assets/css/vendors/slick.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'assets/css/vendors/slick-theme.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'assets/css/vendors/datatables.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'assets/css/vendors/datatable-extension.css' %}">
  <!-- App css -->
  <link id="color" rel="stylesheet" href="{% static 'assets/css/color-1.css' %}" media="screen">
  <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    integrity="sha512-…(hash)…”" crossorigin=" anonymous" referrerpolicy="no-referrer" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    integrity="sha512-…(hash)…”" crossorigin=" anonymous" referrerpolicy="no-referrer" />

  <link rel="stylesheet" href="https://cdn.iconly.io/iconly.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/iconly@latest/css/iconly.css" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
    integrity="sha512-KNuNk+LZ8e2j+ozhRtX7sMGu0j1qFeIslMo7k3M5lVZhcN7sVbG7ByAzt+BrgrbM5nxp7/ECYtJ8O5E2+8Y0eA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />


  <link rel="stylesheet" href="https://cdn.iconly.io/your-generated-hash/iconly.css">




  <style>
    /*.dataTables_length{
      display : none;
    }*/

    .sidebar-pannle-main {
      display: none;
    }

    .margin_left_auto {
      margin-left: auto;
    }
  </style>


  <!-- Image Modal -->
  <div id="imageModal"
    style="display: none; position: fixed; z-index: 1000; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.9); justify-content: center; align-items: center;">
    <span onclick="closeImageModal()"
      style="position: absolute; top: 20px; right: 40px; color: white; font-size: 40px; cursor: pointer; transition: 0.3s;">&times;</span>
    <div style="text-align: center;">
      <img id="modalImage"
        style="max-width: 90%; max-height: 80vh; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.5);">
      <p id="imageCaption" style="color: white; font-size: 20px; margin-top: 15px;"></p>
    </div>
  </div>

</head>





<body>
  <!-- page-wrapper Start-->
  <!-- tap on top starts-->
  <div class="tap-top">
    <i class="fa-solid fa-angle-up"></i>
  </div>
  <!-- tap on tap ends-->
  <!-- loader-->
  <div class="loader-wrapper">
    <div class="loader"><span></span><span></span><span></span><span></span><span></span></div>
  </div>


  <div class="page-wrapper compact-wrapper" id="pageWrapper">

    <!-- this is header section -->
    {% include 'common/header.html' %}
    <!--header section end -->





    <!-- Page Body Start-->
    <div class="page-body-wrapper">
      <!-- Page sidebar start-->
      {% include 'common/sidebar.html' %}
      <!-- Page sidebar end-->

      <!-- body section start  -->
      <div class="page-body">
        <div class="container-fluid">
          <div class="page-title">
            <div class="row">
              <!-- table start -->
              <div class="col-sm-12">
                <div class="card">
                  <div class="card-header pb-0 card-no-border">
                    <h3>Ground Staff</h3>
                  </div>
                  <div class="card-body">
                    <div class="table-responsive">
                      <table class="display dataTable" id="basic-9">
                        <thead style="background:#f8f9fa;">
                          <tr>
                            <th>Sl</th>
                            <th>Name</th>
                            <th>Email ID</th>
                            <th>Mobile Number</th>
                            <th>Status</th>
                            <th>Login Time</th>
                            <th>Logout Time</th>
                            <th>Image</th>
                            <th>Action</th>
                          </tr>
                        </thead>
                        <tbody >
                          {% for data in login_status %}
                          <tr>
                            <td>{{forloop.counter}}</td>
                            <td>{{data.name|capfirst }}</td>
                            <td>{{data.email}}</td>
                            <td>{{data.mobile_no}}</td>
                            <td>{{data.status}}</td>
                            <td>{{ data.login_time|date:"d-m-Y h:i A"|default:"N/A"}}</td>
                            <td>{{ data.logout_time|date:"d-m-Y h:i A"|default:"N/A"}}</td>
                            <td><img src="{{data.image.url}}" width="50" height="50" style="border-radius: 50%; object-fit: cover; cursor: pointer;" onclick="openImageModal('{{data.image.url}}', '{{data.name}}')"></td>
                            <td style="text-align: center;">
                                {% if data.latitude and data.longitude %}
                                    <a href="https://www.google.com/maps?q={{data.latitude}},{{data.longitude}}" 
                                      target="_blank" 
                                      rel="noopener noreferrer"
                                      title="View location: {{data.latitude}}, {{data.longitude}}"
                                      style="color: #1a73e8; text-decoration: none; display: inline-flex; align-items: center; justify-content: center; padding: 6px 12px; border-radius: 4px; background: #e8f0fe; transition: all 0.2s;">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 4px;">
                                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                                        </svg>
                                        Map
                                    </a>
                                {% else %}
                                    <span >N/A</span>
                                {% endif %}
                            </td>
                          </tr>
                          {% endfor %}
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
      <!-- Container-fluid starts-->
      {% include 'common/footer.html' %}
    </div>
    <!-- page body end  -->

  </div>




  <!-- jquery-->
  <script src="{% static 'assets/js/vendors/jquery/jquery.min.js' %}"></script>
  <!-- bootstrap js-->
  <script src="{% static 'assets/js/vendors/bootstrap/dist/js/bootstrap.bundle.min.js' %}" defer=""></script>
  <script src="{% static 'assets/js/vendors/bootstrap/dist/js/popper.min.js' %}" defer=""></script>
  <!--fontawesome-->
  <script src="{% static 'assets/js/vendors/font-awesome/fontawesome-min.js' %}"></script>
  <!-- feather-->
  <script src="{% static 'assets/js/vendors/feather-icon/feather.min.js' %}"></script>
  <script src="{% static 'assets/js/vendors/feather-icon/custom-script.js' %}"></script>
  <!-- sidebar -->
  <script src="{% static 'assets/js/sidebar.js' %}"></script>
  <!-- height_equal-->
  <script src="{% static 'assets/js/height-equal.js' %}"></script>
  <!-- config-->
  <script src="{% static 'assets/js/config.js' %}"></script>
  <!-- apex-->
  <script src="{% static 'assets/js/chart/apex-chart/apex-chart.js' %}"></script>
  <script src="{% static 'assets/js/chart/apex-chart/stock-prices.js' %}"></script>
  <!-- scrollbar-->
  <script src="{% static 'assets/js/scrollbar/simplebar.js' %}"></script>
  <script src="{% static 'assets/js/scrollbar/custom.js' %}"></script>
  <!-- slick-->
  <script src="{% static 'assets/js/slick/slick.min.js' %}"></script>
  <script src="{% static 'assets/js/slick/slick.js' %}"></script>
  <!-- data_table-->
  <script src="{% static 'assets/js/js-datatables/datatables/jquery.dataTables.min.js' %}"></script>
  <!-- page_datatable-->
  <script src="{% static 'assets/js/js-datatables/datatables/datatable.custom.js' %}"></script>
  <!-- page_datatable1-->
  <script src="{% static 'assets/js/js-datatables/datatables/datatable.custom1.js' %}"></script>
  <!-- page_datatable-->
  <script src="{% static 'assets/js/datatable/datatables/datatable.custom.js' %}"></script>
  <!-- theme_customizer-->
  <script src="{% static 'assets/js/theme-customizer/customizer.js' %}"></script>
  <!-- tilt-->
  <script src="{% static 'assets/js/animation/tilt/tilt.jquery.js' %}"></script>
  <!-- page_tilt-->
  <script src="{% static 'assets/js/animation/tilt/tilt-custom.js' %}"></script>
  <!-- dashboard_1-->
  <script src="{% static 'assets/js/dashboard/dashboard_1.js' %}"></script>


  <!-- slick-->
  <script src="{% static 'assets/js/slick/slick.min.js' %}"></script>
  <script src="{% static 'assets/js/slick/slick.js' %}"></script>
  <!-- datatable-->
  <script src="{% static 'assets/js/datatable/datatables/jquery.dataTables.min.js' %}"></script>
  <!-- datatable_extension-->
  <script src="{% static 'assets/js/datatable/datatable-extension/dataTables.buttons.min.js' %}"></script>
  <script src="{% static 'assets/js/datatable/datatable-extension/jszip.min.js' %}"></script>
  <script src="{% static 'assets/js/datatable/datatable-extension/buttons.colVis.min.js' %}"></script>
  <script src="{% static 'assets/js/datatable/datatable-extension/pdfmake.min.js' %}"></script>
  <script src="{% static 'assets/js/datatable/datatable-extension/vfs_fonts.js' %}"></script>
  <script src="{% static 'assets/js/datatable/datatable-extension/dataTables.autoFill.min.js' %}"></script>
  <script src="{% static 'assets/js/datatable/datatable-extension/dataTables.select.min.js' %}"></script>
  <script src="{% static 'assets/js/datatable/datatable-extension/buttons.bootstrap4.min.js' %}"></script>
  <script src="{% static 'assets/js/datatable/datatable-extension/buttons.html5.min.js' %}"></script>
  <script src="{% static 'assets/js/datatable/datatable-extension/buttons.print.min.js' %}"></script>
  <script src="{% static 'assets/js/datatable/datatable-extension/dataTables.bootstrap4.min.js' %}"></script>
  <script src="{% static 'assets/js/datatable/datatable-extension/dataTables.responsive.min.js' %}"></script>
  <script src="{% static 'assets/js/datatable/datatable-extension/responsive.bootstrap4.min.js' %}"></script>
  <script src="{% static 'assets/js/datatable/datatable-extension/dataTables.keyTable.min.js' %}"></script>
  <script src="{% static 'assets/js/datatable/datatable-extension/dataTables.colReorder.min.js' %}"></script>
  <script src="{% static 'assets/js/datatable/datatable-extension/dataTables.fixedHeader.min.js' %}"></script>
  <script src="{% static 'assets/js/datatable/datatable-extension/dataTables.rowReorder.min.js' %}"></script>
  <script src="{% static 'assets/js/datatable/datatable-extension/dataTables.scroller.min.js' %}"></script>
  <script src="{% static 'assets/js/datatable/datatable-extension/custom.js' %}"></script>

  <!-- datatable-->
  <script src="{% static 'assets/js/datatable/datatables/jquery.dataTables.min.js' %}"></script>
  <!-- page_datatable -->
  <script src="{% static 'assets/js/js-datatables/datatables/datatable.custom.js' %}"></script>
  <!-- page_datatable-->
  <!-- <script src="{% static 'assets/js/datatable/datatables/datatable.custom.js' %}"></script> -->
  <!-- theme_customizer-->
  <script src="{% static 'assets/js/theme-customizer/customizer.js' %}"></script>

  <!-- custom script -->
  <script src="{% static 'assets/js/script.js' %}"></script>


  <script>
    const employees = [

      { sl: 1, name: "Arjun Mehta", email: "arjun.mehta@example.com", mobile: "9876543201", status: "active", loginTime: "09:00", logoutTime: "18:00", image: "https://i.pravatar.cc/150?img=1" },
      { sl: 2, name: "Sneha Sharma", email: "sneha.sharma@example.com", mobile: "9876543202", status: "inactive", loginTime: "10:15", logoutTime: "17:30", image: "https://i.pravatar.cc/150?img=2" },
      { sl: 3, name: "Rohan Gupta", email: "rohan.gupta@example.com", mobile: "9876543203", status: "active", loginTime: "08:50", logoutTime: "17:40", image: "https://i.pravatar.cc/150?img=3" },
      { sl: 4, name: "Priya Nair", email: "priya.nair@example.com", mobile: "9876543204", status: "inactive", loginTime: "10:20", logoutTime: "18:10", image: "https://i.pravatar.cc/150?img=4" },
      { sl: 5, name: "Vikas Yadav", email: "vikas.yadav@example.com", mobile: "9876543205", status: "active", loginTime: "09:10", logoutTime: "18:05", image: "https://i.pravatar.cc/150?img=5" },

      { sl: 6, name: "Meera Kulkarni", email: "meera.kulkarni@example.com", mobile: "9876543206", status: "inactive", loginTime: "10:05", logoutTime: "17:50", image: "https://i.pravatar.cc/150?img=6" },
      { sl: 7, name: "Harsh Patel", email: "harsh.patel@example.com", mobile: "9876543207", status: "active", loginTime: "08:45", logoutTime: "17:55", image: "https://i.pravatar.cc/150?img=7" },
      { sl: 8, name: "Ankita Singh", email: "ankita.singh@example.com", mobile: "9876543208", status: "inactive", loginTime: "10:30", logoutTime: "17:40", image: "https://i.pravatar.cc/150?img=8" },
      { sl: 9, name: "Sameer Bansal", email: "sameer.bansal@example.com", mobile: "9876543209", status: "active", loginTime: "09:05", logoutTime: "18:10", image: "https://i.pravatar.cc/150?img=9" },
      { sl: 10, name: "Ritu Verma", email: "ritu.verma@example.com", mobile: "9876543210", status: "inactive", loginTime: "10:25", logoutTime: "17:35", image: "https://i.pravatar.cc/150?img=10" },

      { sl: 11, name: "Aman Singh", email: "aman.singh@example.com", mobile: "9876543211", status: "active", loginTime: "08:55", logoutTime: "17:45", image: "https://i.pravatar.cc/150?img=11" },
      { sl: 12, name: "Nidhi Chauhan", email: "nidhi.chauhan@example.com", mobile: "9876543212", status: "inactive", loginTime: "10:10", logoutTime: "18:00", image: "https://i.pravatar.cc/150?img=12" },
      { sl: 13, name: "Rakesh Menon", email: "rakesh.menon@example.com", mobile: "9876543213", status: "active", loginTime: "09:00", logoutTime: "18:00", image: "https://i.pravatar.cc/150?img=13" },
      { sl: 14, name: "Tanisha Rao", email: "tanisha.rao@example.com", mobile: "9876543214", status: "inactive", loginTime: "10:15", logoutTime: "17:50", image: "https://i.pravatar.cc/150?img=14" },
      { sl: 15, name: "Kunal Kapoor", email: "kunal.kapoor@example.com", mobile: "9876543215", status: "active", loginTime: "08:50", logoutTime: "17:55", image: "https://i.pravatar.cc/150?img=15" },

      { sl: 16, name: "Bhavya Sinha", email: "bhavya.sinha@example.com", mobile: "9876543216", status: "inactive", loginTime: "10:00", logoutTime: "17:45", image: "https://i.pravatar.cc/150?img=16" },
      { sl: 17, name: "Deepak Jaiswal", email: "deepak.jaiswal@example.com", mobile: "9876543217", status: "active", loginTime: "09:20", logoutTime: "18:15", image: "https://i.pravatar.cc/150?img=17" },
      { sl: 18, name: "Kritika Desai", email: "kritika.desai@example.com", mobile: "9876543218", status: "inactive", loginTime: "10:35", logoutTime: "17:55", image: "https://i.pravatar.cc/150?img=18" },
      { sl: 19, name: "Raghav Kohli", email: "raghav.kohli@example.com", mobile: "9876543219", status: "active", loginTime: "08:40", logoutTime: "17:35", image: "https://i.pravatar.cc/150?img=19" },
      { sl: 20, name: "Mansi Goyal", email: "mansi.goyal@example.com", mobile: "9876543220", status: "inactive", loginTime: "10:20", logoutTime: "18:05", image: "https://i.pravatar.cc/150?img=20" }

    ];


    const tbody = document.getElementById("table-body");

    employees.forEach(emp => {

      // const parts = emp.date.split('/'); // [yyyy, mm, dd]
      //const formattedDate = `${parts[2]}/${parts[1]}/${parts[0]}`; 

      tbody.innerHTML += `
      <tr>
        <td>${emp.sl}</td>
        <td>${emp.name}</td>
        <td>${emp.email}</td>
        <td>${emp.mobile}</td>
        <td>${emp.status}</td>
        <td>${emp.loginTime}</td>
        <td>${emp.logoutTime}</td>
        <td><img src="${emp.image}" width="50" height="50" style="border-radius: 50%; object-fit: cover; cursor: pointer;" onclick="openImageModal('${emp.image}', '${emp.name}')"></td>

        <td>
            <a href="https://www.google.com/maps?q=20.295136727143245,85.82908364419782" target="_blank">
              <button class="btn btn-primary">View map</button>
            </a>
        </td>
      </tr>`

    });

    function openImageModal(imageSrc, name) {
      const modal = document.getElementById('imageModal');
      const modalImg = document.getElementById('modalImage');
      const caption = document.getElementById('imageCaption');

      modal.style.display = "flex";
      modalImg.src = imageSrc;
      caption.textContent = name;
    }

    function closeImageModal() {
      document.getElementById('imageModal').style.display = "none";
    }

    // Close modal when clicking outside the image
    document.getElementById('imageModal').addEventListener('click', function (e) {
      if (e.target === this) {
        closeImageModal();
      }
    });

  </script>

</body>

</html>